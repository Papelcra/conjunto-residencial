{% extends "base.html" %}

{% block title %}Notificar Pago{% endblock %}

{% block content %}
<div class="container mt-5">
    <h1 class="mb-4">Notificar Pago de Administración</h1>

    {% if apartamento %}
        <div class="alert alert-info">
            <strong>Apartamento:</strong> {{ apartamento.identificador }} 
            {% if apartamento.bloque_o_torre %}- Torre/Bloque {{ apartamento.bloque_o_torre }}{% endif %}
        </div>
    {% else %}
        <div class="alert alert-warning">
            No se encontró apartamento asignado. Contacta a administración.
        </div>
    {% endif %}

    <div class="card shadow">
        <div class="card-header bg-primary text-white">
            <h5 class="mb-0">Sube tu comprobante de pago</h5>
        </div>
        <div class="card-body">
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}

                <div class="row">
                    <div class="col-md-6 mb-3">
                        {{ form.monto.label_tag }}
                        {{ form.monto }}
                        {{ form.monto.errors }}
                    </div>
                    <div class="col-md-6 mb-3">
                        {{ form.fecha_pago.label_tag }}
                        {{ form.fecha_pago }}
                        {{ form.fecha_pago.errors }}
                    </div>
                </div>

                <div class="mb-3">
                    {{ form.periodo.label_tag }}
                    {{ form.periodo }}
                    {{ form.periodo.errors }}
                    <small class="form-text text-muted">Ejemplo: Enero 2026, Febrero-Marzo 2026</small>
                </div>

                <div class="mb-4">
                    {{ form.comprobante.label_tag }}
                    {{ form.comprobante }}
                    {{ form.comprobante.errors }}
                    <small class="form-text text-muted">Formatos aceptados: JPG, PNG, PDF (máx. 5MB recomendado)</small>
                </div>

                <button type="submit" class="btn btn-success btn-lg w-100">
                    <i class="bi bi-upload me-2"></i> Enviar Comprobante
                </button>
            </form>
        </div>
    </div>

    <div class="alert alert-light mt-4 border">
        <i class="bi bi-info-circle me-2"></i>
        Una vez enviado, el pago quedará como "Pendiente de verificación". 
        La administración revisará el comprobante y te notificará el estado.
    </div>
</div>
{% endblock %}